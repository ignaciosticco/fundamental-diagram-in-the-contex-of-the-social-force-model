\section{\label{background}Background}

\subsection{\label{sfm}The Social Force Model}

Our research was carried out in the context of the ``social force model'' (SFM) 
proposed by Helbing and co-workers \cite{Helbing1}. This model states that human 
motion is caused by the desire of people to reach a certain destination, as 
well as other environmental factors. The pedestrians behavioral pattern in a 
crowded environment can be modeled by three kind of forces: the ``desire 
force'', the ``social force'' and the ``granular force''.

The ``desire force'' represents the pedestrian's own desire to reach a 
specific target position at a desired velocity $v_d$. But, in order to reach 
the desired target, he (she) needs to accelerate (decelerate) from his (her) 
current velocity $\mathbf{v}^{(i)}(t)$. This acceleration (or deceleration) 
represents a ``desire force'' since it is motivated by his (her) own 
willingness. The corresponding expression for this forces is 

\begin{equation}
        \mathbf{f}_d^ {(i)}(t) =  
m_i\,\displaystyle\frac{v_d^{(i)}\,\mathbf{e}_d^
{(i)}(t)-\mathbf{v}^{(i)}(t)}{\tau} \label{desired}
\end{equation}

where $m_i$ is the mass of the pedestrian $i$. $\mathbf{e}_d$ 
corresponds to the unit vector pointing to the target position and $\tau$ is a 
constant related to the relaxation time needed to reach his (her) desired 
velocity. Its value is determined experimentally. For simplicity, we assume that 
$v_d$ remains constant during an evacuation process and is the same for all 
individuals, but $\mathbf{e}_d$ changes according to the current position of the 
pedestrian. Detailed values for $m_i$ and $\tau$ can be found in 
Refs.~\cite{Helbing1,Dorso3}. 

The ``social force'' represents the psychological tendency of two pedestrians,  
say $i$ and $j$, to stay away from each other by a repulsive interaction force 

\begin{equation}
        \mathbf{f}_s^{(ij)} = A_i\,e^{(r_{ij}-d_{ij})/B_i}\mathbf{n}_{ij} 
        \label{social}
\end{equation}

where $(ij)$ means any pedestrian-pedestrian pair, or pedestrian-wall 
pair. $A_i$ and $B_i$ are fixed values, $d_{ij}$ is the distance between  the 
center of mass of the pedestrians $i$ and $j$ and the distance $r_{ij}=r_i+r_j$ 
is the sum of the pedestrians radius. $\mathbf{n}_{ij}$ means the unit vector in 
the $\vec{ji}$ direction.

Any two pedestrians touch each other if their distance $d_{ij}$ is smaller than 
$r_{ij}$.  In this case, an additional force is included in the model, called 
the ``granular force''. This force is considered be a linear function of the 
relative (tangential) velocities of the contacting individuals. Its mathematical 
expression reads 

\begin{equation}
        \mathbf{f}_g^{(ij)} = 
\kappa\,(r_{ij}-d_{ij})\,\Theta(r_{ij}-d_{ij})\,\Delta
\mathbf{v}^{(ij)}\cdot\mathbf{t}_{ij} 
        \label{granular}
\end{equation}

where $\kappa$ is a fixed parameter. The function 
$\Theta(r_{ij}-d_{ij})$ is zero when its argument is negative (that is, 
$r_{ij}<d_{ij}$) and equals unity for any other case (Heaviside function). 
$\Delta\mathbf{v}^{(ij)}\cdot\mathbf{t}_{ij}$ represents the difference between 
the tangential velocities of the sliding bodies (or between the individual and 
the walls).   

The above forces actuate on the pedestrians dynamics by changing his (her) 
current velocity. The equation of motion for pedestrian $i$ reads

\begin{equation}
m_i\,\displaystyle\frac{d\mathbf{v}^{(i)}}{dt}=\mathbf{f}_d^{(i)}
+\displaystyle\sum_{j=1}^{N}\displaystyle\mathbf{f}_s^{(ij)}
+\displaystyle\sum_ {
j=1}^{N}\mathbf{f}_g^{(ij)}\label{eq_mov}
\end{equation}

where the subscript $j$ represents all the other pedestrians 
(excluding $i$) and the walls. 

\subsection{\label{fundamental-diagram} Fundamental Diagram}

Inspired in the vehicular traffic dynamic studies, many researches of pedestrian dynamics focus its attention on the relation between the flow and density of a moving crowd. This analysis is called fundamental diagram and it has become one of the most common ways to characterize the pedestrians dynamics in unidirectional and bidirectional flows. 

In this paper we use the mathematical expressions defined by Helbing et al. as regards to the fundamental diagram analysis. Thus, the density definition reads 

\begin{equation}
\rho(\vec{r},t)=\sum_{j}f(\vec{r}_j(t)-\vec{r}) \label{ec-density}
\end{equation}

where function f is

\begin{equation}
f(\vec{r}_j-\vec{r})=\frac{1}{\pi R^2}exp[-\left \| \vec{r}_j-\vec{r} \right \|^2/R^2] \label{ec-f}
\end{equation}

The local speeds have been defined via the weighted average  

\begin{equation}
\vec{V}(\vec{r},t)=\frac{\sum_j \vec{v}_jf(\vec{r}_j(t)-\vec{r}) }{\sum_j f(\vec{r}_j(t)-\vec{r}) } \label{ec-v}
\end{equation}

while flows have been determined according to the fluid-dynamic formula

\begin{equation}
\vec{J}(\vec{r},t)=\rho(\vec{r},t)V(\vec{r},t) \label{ec-flow}
\end{equation}
